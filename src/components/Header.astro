---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
---

<header>
	<nav>
		<h2><a href="/">{SITE_TITLE}</a></h2>

		<div class="internal-links">
			<HeaderLink href="/">Accueil</HeaderLink>

			<div class="dropdown">
				<button class="dropbtn">
					A propos 
					<svg class="chevron" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
				</button>
				<div class="dropdown-content">
					<a href="/presentation">Présentation</a>
					<a href="/cv.pdf" target="_blank">Mon CV</a>
				</div>
			</div>

			<HeaderLink href="/competences">Compétences</HeaderLink>

			<div class="dropdown">
				<button class="dropbtn">
					Portfolio
					<svg class="chevron" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
				</button>
				<div class="dropdown-content">
					<a href="/developpement">Dev WEB</a>
					<a href="/communication">Communication WEB</a>
					<a href="/design">Design Multimédia</a>
					<a href="/light">Éclairage scénique</a>
				</div>
			</div>

			<HeaderLink href="/contact">Contact</HeaderLink>
		</div>

		<div class="social-links">
			<a href="https://linkedin.com/in/tom-marcheron-35b087357" target="_blank" aria-label="LinkedIn">
				<svg viewBox="0 0 24 24" aria-hidden="true" width="24" height="24" fill="currentColor">
					<path d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.3 6.5a1.78 1.78 0 01-1.8 1.75zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.74 1.74 0 0013 14.19V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 3.66z"></path>
				</svg>
			</a>
		</div>
	</nav>
</header>

<style>
	/* --- HEADER GENERAL --- */
	header {
		margin: 0;
		padding: 0 1rem;
		background: white;
		box-shadow: 0 2px 8px rgba(0,0,0, 0.05);
		position: sticky; top: 0; z-index: 1000;
	}

	nav {
		display: flex; align-items: center; justify-content: space-between;
		max-width: 1200px; margin: 0 auto; height: 72px;
	}

	h2 { margin: 0; font-size: 1.2rem; font-weight: 800; }
	h2 a { text-decoration: none; color: #111; }

	/* --- UNIFORMISATION DES LIENS ET BOUTONS --- */
	.internal-links {
		display: flex; gap: 0.5rem; height: 100%; align-items: center;
	}

	/* On cible à la fois les liens <a> et les boutons <button> */
	/* Pour qu'ils aient exactement la même apparence */
	.internal-links :global(a), 
	.dropbtn {
		font-family: 'Outfit', sans-serif !important; /* Force la police */
		font-size: 1rem; /* Taille identique pour tous */
		font-weight: 500;
		color: #111;
		text-decoration: none;
		padding: 0.5rem 0.8rem; /* Espacement identique */
		display: inline-flex;
		align-items: center;
		border: none;
		background: none;
		cursor: pointer;
		transition: color 0.2s;
	}

	.internal-links :global(a):hover,
	.dropbtn:hover {
		color: #4f39fa;
	}
	
	/* --- STYLE DES DROPDOWNS --- */
	.dropdown {
		position: relative;
		height: 100%;
		display: flex;
		align-items: center;
	}

	/* Petite flèche SVG */
	.chevron { width: 16px; height: 16px; margin-left: 4px; opacity: 0.5; transition: transform 0.2s; }

	/* --- LE MENU DÉROULANT CACHÉ --- */
	.dropdown-content {
		display: none;
		position: absolute;
		top: 60px;
		left: 50%; transform: translateX(-50%);
		background-color: white;
		min-width: 220px;
		box-shadow: 0 10px 30px rgba(0,0,0,0.15);
		border-radius: 12px;
		padding: 8px;
		border: 1px solid #f3f4f6;
		z-index: 999;
	}

	/* On réinitialise le style des liens À L'INTÉRIEUR du menu déroulant */
	/* pour ne pas qu'ils ressemblent aux liens du menu principal */
	.dropdown-content a {
		font-weight: 400 !important; /* Moins gras */
		display: block;
		width: 100%;
		box-sizing: border-box;
		padding: 10px 16px !important;
		border-radius: 8px;
		color: #333 !important;
	}

	.dropdown-content a:hover {
		background-color: #f3f4f6;
		color: #4f39fa !important;
	}

	/* Animation */
	.dropdown:hover .dropdown-content { display: flex; flex-direction: column; animation: fadeIn 0.2s ease-in-out; }
	.dropdown:hover .chevron { transform: rotate(180deg); }

	@keyframes fadeIn {
		from { opacity: 0; transform: translateX(-50%) translateY(-10px); }
		to { opacity: 1; transform: translateX(-50%) translateY(0); }
	}

	/* --- SOCIAUX (CORRIGÉS) --- */
	.social-links { 
		display: flex; 
		gap: 1rem; 
		align-items: center; /* Centre verticalement */
	}
	.social-links a { 
		color: #111; 
		display: flex; /* Enlève l'espace fantôme sous l'image */
		transition: color 0.2s; 
	}
	.social-links a:hover { color: #4f39fa; transform: scale(1.1); }

	@media (max-width: 768px) {
		.social-links { display: none; }
		.internal-links { display: none; }
	}
</style>